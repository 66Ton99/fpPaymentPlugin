<?php $classes = sfConfig::get('fp_payment_object_classes_names', array()) ?> 
fpPaymentOrder:
  actAs:
    Timestampable: ~
  columns:
    customer_id: {type: integer, notnull: true}
    status: {type: enum, values: [<?php echo implode(', ', fpPaymentOrder::getStatusEnums()) ?>] }
    type: {type: varchar(255)}
    currency: {type: varchar(6), notnull: true}
  relations:
    Customer:
      class: sfGuardUser
      local:    customer_id
      onDelete: CASCADE

fpPaymentOrderItem:
  actAs:
    Timestampable: ~
  columns:
    oreder_id: {type: integer, notnull: true}
    object_id: {type: integer}
<?php if (1 < count($classes)) { ?> 
    object_class_name: {type: string(255)}
<?php } ?> 
    quantity: {type: integer, notnull: tru}
    name: {type: varchar(255)}
    price: {type: decimal(10), scale: 2, notnull: true}
  relations:
    Order:
      class: fpPaymentOrder
      local: oreder_id
      onDelete: CASCADE
<?php if (1 == count($classes)) { ?> 
    Product:
      class: <?php echo sfInflector::camelize(array_pop($classes)) ?> 
      local: object_id
      onDelete: CASCADE
<?php } ?> 